const catalog=[{id:1,title:'DD SmartVision Lite',price:550000,img:'assets/img/product.jpg',file:'assets/downloads/DD_SmartVision_Lite_demo.zip'}];function formatGs(n){return '₲ '+n.toLocaleString('es-PY');}function renderCatalog(){const c=document.getElementById('catalog');if(!c) return;catalog.forEach(p=>{const div=document.createElement('div');div.className='card';div.innerHTML=`<img src="${p.img}" style="width:100%;height:160px;object-fit:cover;border-radius:8px;margin-bottom:8px;"><h3>${p.title}</h3><p style="font-weight:700">${formatGs(p.price)}</p><div><button class='btn add' data-id='${p.id}'>Agregar al carrito</button> <a class='btn' href="${p.file}" download>Descargar demo</a></div>`;c.appendChild(div);});}let cart=JSON.parse(localStorage.getItem('dd_cart')||'[]');function saveCart(){localStorage.setItem('dd_cart',JSON.stringify(cart));renderCart();}function addToCart(id){const p=catalog.find(x=>x.id==id);if(!p) return;const it=cart.find(x=>x.id==id);if(it)it.qty++;else cart.push({id:p.id,title:p.title,price:p.price,qty:1});saveCart();}function renderCart(){const el=document.getElementById('cart-items');if(!el) return;el.innerHTML='';let total=0;cart.forEach(i=>{total+=i.price*i.qty;const row=document.createElement('div');row.innerHTML=`<div style="display:flex;justify-content:space-between;padding:8px 0"><div>${i.title} x ${i.qty}</div><div>${formatGs(i.price*i.qty)}</div></div>`;el.appendChild(row);});const tot=document.getElementById('cart-total');if(tot) tot.innerText=formatGs(total);}document.addEventListener('DOMContentLoaded',()=>{renderCatalog();document.body.addEventListener('click',e=>{if(e.target.matches('.add')) addToCart(parseInt(e.target.dataset.id));});document.getElementById('checkout')?.addEventListener('click',()=>{const total=cart.reduce((s,i)=>s+i.price*i.qty,0);if(total<=0){alert('El carrito está vacío');return;}if(confirm('Vas a pagar '+formatGs(total)+'. Serás redirigido a PayPal.me. Después envia comprobante al correo: davalosdavalostech@gmail.com')) window.open('https://www.paypal.com/paypalme/davalosdavalostech','_blank');});});